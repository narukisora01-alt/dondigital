<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=5.0, user-scalable=yes">
<meta name="theme-color" content="#000000">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
<title>Don Digital</title>
<meta name="description" content="A secure and trusted platform for purchasing digital products. Safe payments, instant delivery, and reliable support to ensure a smooth and protected buying experience.">
<meta property="og:title" content="Don Digital">
<meta property="og:description" content="A secure and trusted platform for purchasing digital products. Safe payments, instant delivery, and reliable support you can rely on.">
<meta property="og:image" content="https://i.ibb.co/Q7kgsVHy/Screenshot-2026-01-31-145451.png">
<meta property="og:url" content="https://dondigital.vercel.app/">
<meta property="og:type" content="website">
<style>
* {
    margin: 0;
    padding: 0;
    box-sizing: border-box;
}

html {
    scroll-behavior: smooth;
}

:root {
    --bg-primary: #0a0a0a;
    --bg-secondary: #141414;
    --bg-tertiary: #1a1a1a;
    --text-primary: #ffffff;
    --text-secondary: #a3a3a3;
    --text-tertiary: #737373;
    --border-light: rgba(255,255,255,0.08);
    --border-medium: rgba(255,255,255,0.15);
    --accent: #ffffff;
    --accent-hover: #e5e5e5;
    --success: #22c55e;
    --danger: #ef4444;
    --warning: #f97316;
    --shadow-sm: 0 1px 2px rgba(0,0,0,0.3);
    --shadow-md: 0 4px 6px rgba(0,0,0,0.4);
    --shadow-lg: 0 10px 15px rgba(0,0,0,0.6);
    --transition: 0.2s cubic-bezier(0.4, 0, 0.2, 1);
}

body {
    font-family: -apple-system, BlinkMacSystemFont, 'Inter', 'Segoe UI', sans-serif;
    background: var(--bg-primary);
    color: var(--text-primary);
    line-height: 1.6;
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
    position: relative;
}

body::before {
    content: '';
    position: fixed;
    inset: 0;
    background: 
        radial-gradient(circle at 20% 20%, rgba(255,255,255,0.03) 0%, transparent 50%),
        radial-gradient(circle at 80% 80%, rgba(255,255,255,0.02) 0%, transparent 50%);
    pointer-events: none;
    z-index: 0;
}

body::after {
    content: '';
    position: fixed;
    inset: 0;
    background-image: 
        linear-gradient(rgba(255,255,255,0.015) 1px, transparent 1px),
        linear-gradient(90deg, rgba(255,255,255,0.015) 1px, transparent 1px);
    background-size: 50px 50px;
    pointer-events: none;
    z-index: 0;
    opacity: 0.4;
}

.app-container {
    display: flex;
    min-height: 100vh;
    position: relative;
    z-index: 1;
}

.sidebar {
    width: 280px;
    background: var(--bg-primary);
    border-right: 1px solid var(--border-light);
    padding: 2rem 1.5rem;
    position: fixed;
    height: 100vh;
    overflow-y: auto;
    z-index: 1001;
    transition: transform var(--transition);
    animation: slideInLeft 0.6s cubic-bezier(0.4, 0, 0.2, 1);
}

.sidebar::before {
    content: '';
    position: absolute;
    top: 0;
    right: 0;
    width: 1px;
    height: 100%;
    background: linear-gradient(180deg, transparent, rgba(255,255,255,0.1), transparent);
    animation: shimmer 3s infinite;
    pointer-events: none;
}

.sidebar-header {
    margin-bottom: 3rem;
}

.brand {
    display: flex;
    align-items: center;
    gap: 0.75rem;
    margin-bottom: 0.5rem;
}

.brand-icon {
    width: 36px;
    height: 36px;
    background: linear-gradient(135deg, #ffffff 0%, #a3a3a3 100%);
    border-radius: 8px;
    display: flex;
    align-items: center;
    justify-content: center;
    color: var(--bg-primary);
    font-weight: 700;
    font-size: 1.25rem;
    transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
    animation: float 3s ease-in-out infinite;
}

.brand:hover .brand-icon {
    transform: rotate(360deg) scale(1.1);
    box-shadow: 0 0 20px rgba(255,255,255,0.3);
}

.brand-name {
    font-size: 1.25rem;
    font-weight: 700;
    letter-spacing: -0.01em;
    background: linear-gradient(135deg, #ffffff 0%, #888888 100%);
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    background-clip: text;
}

.brand-tagline {
    font-size: 0.8125rem;
    color: var(--text-secondary);
    margin-left: 45px;
}

.nav-menu {
    list-style: none;
    margin-bottom: 2rem;
}

.nav-item {
    margin-bottom: 0.25rem;
}

.nav-link {
    display: flex;
    align-items: center;
    gap: 0.75rem;
    padding: 0.75rem 1rem;
    color: var(--text-secondary);
    text-decoration: none;
    border-radius: 8px;
    transition: all var(--transition);
    font-size: 0.9375rem;
    font-weight: 500;
    position: relative;
    overflow: hidden;
    -webkit-tap-highlight-color: transparent;
    touch-action: manipulation;
    cursor: pointer;
}

.nav-link::before {
    content: '';
    position: absolute;
    top: 50%;
    left: 50%;
    width: 0;
    height: 0;
    border-radius: 50%;
    background: rgba(255,255,255,0.1);
    transform: translate(-50%, -50%);
    transition: width 0.6s, height 0.6s;
}

.nav-link:hover::before {
    width: 300px;
    height: 300px;
}

.nav-link:hover {
    background: var(--bg-secondary);
    color: var(--text-primary);
    transform: translateX(5px);
}

.nav-link.active {
    background: linear-gradient(135deg, #ffffff 0%, #e5e5e5 100%);
    color: var(--bg-primary);
}

.nav-icon {
    transition: transform 0.3s cubic-bezier(0.4, 0, 0.2, 1);
}

.nav-link:hover .nav-icon {
    transform: scale(1.2) rotate(10deg);
}

.comments-section {
    margin-top: 2rem;
    padding-top: 2rem;
    border-top: 1px solid var(--border-light);
}

.calculator-button {
    display: flex;
    align-items: center;
    gap: 0.75rem;
    width: 100%;
    padding: 0.75rem 1rem;
    background: linear-gradient(135deg, rgba(255,255,255,0.08) 0%, rgba(255,255,255,0.03) 100%);
    border: 1px solid var(--border-light);
    border-radius: 8px;
    color: var(--text-primary);
    font-size: 0.9375rem;
    font-weight: 600;
    cursor: pointer;
    transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
    position: relative;
    overflow: hidden;
    -webkit-tap-highlight-color: transparent;
    touch-action: manipulation;
    margin-top: 1rem;
}

.calculator-button::before {
    content: '';
    position: absolute;
    top: 50%;
    left: 50%;
    width: 0;
    height: 0;
    border-radius: 50%;
    background: rgba(255,255,255,0.1);
    transform: translate(-50%, -50%);
    transition: width 0.6s, height 0.6s;
}

.calculator-button:hover::before {
    width: 300px;
    height: 300px;
}

.calculator-button:hover {
    background: linear-gradient(135deg, rgba(255,255,255,0.15) 0%, rgba(255,255,255,0.08) 100%);
    border-color: var(--border-medium);
    transform: translateX(5px);
}

.calculator-button .nav-icon {
    transition: transform 0.3s cubic-bezier(0.4, 0, 0.2, 1);
}

.calculator-button:hover .nav-icon {
    transform: scale(1.2) rotate(10deg);
}

.modal {
    display: none;
    position: fixed;
    inset: 0;
    background: rgba(0,0,0,0.8);
    z-index: 1002;
    align-items: center;
    justify-content: center;
    padding: 1rem;
    animation: fadeIn 0.3s ease;
}

.modal.active {
    display: flex;
}

@keyframes fadeIn {
    from {
        opacity: 0;
    }
    to {
        opacity: 1;
    }
}

@keyframes slideUp {
    from {
        opacity: 0;
        transform: translateY(30px);
    }
    to {
        opacity: 1;
        transform: translateY(0);
    }
}

.modal-content {
    background: var(--bg-primary);
    border: 1px solid var(--border-light);
    border-radius: 16px;
    padding: 2rem;
    max-width: 500px;
    width: 100%;
    animation: slideUp 0.4s cubic-bezier(0.4, 0, 0.2, 1);
    position: relative;
}

.modal-header {
    display: flex;
    align-items: center;
    justify-content: space-between;
    margin-bottom: 1.5rem;
}

.modal-title {
    font-size: 1.5rem;
    font-weight: 700;
    letter-spacing: -0.02em;
    background: linear-gradient(135deg, #ffffff 0%, #888888 100%);
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    background-clip: text;
}

.modal-close {
    background: none;
    border: none;
    font-size: 1.5rem;
    color: var(--text-secondary);
    cursor: pointer;
    padding: 0.5rem;
    transition: all 0.3s ease;
    -webkit-tap-highlight-color: transparent;
}

.modal-close:hover {
    color: var(--text-primary);
    transform: rotate(90deg);
}

.converter-tabs {
    display: flex;
    gap: 0.5rem;
    background: var(--bg-secondary);
    padding: 0.375rem;
    border-radius: 10px;
    border: 1px solid var(--border-light);
    margin-bottom: 1.5rem;
}

.converter-tab {
    flex: 1;
    padding: 0.75rem 1rem;
    background: transparent;
    border: none;
    border-radius: 6px;
    font-size: 0.9375rem;
    font-weight: 600;
    color: var(--text-secondary);
    cursor: pointer;
    transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
    -webkit-tap-highlight-color: transparent;
    touch-action: manipulation;
}

.converter-tab:hover {
    color: var(--text-primary);
}

.converter-tab.active {
    background: linear-gradient(135deg, #ffffff 0%, #e5e5e5 100%);
    color: var(--bg-primary);
    box-shadow: 0 2px 8px rgba(255,255,255,0.2);
}

.converter-form {
    display: flex;
    flex-direction: column;
    gap: 1.25rem;
}

.form-group {
    display: flex;
    flex-direction: column;
    gap: 0.5rem;
}

.form-label {
    font-size: 0.875rem;
    font-weight: 600;
    color: var(--text-secondary);
    text-transform: uppercase;
    letter-spacing: 0.05em;
}

.form-input {
    width: 100%;
    padding: 1rem;
    background: var(--bg-secondary);
    border: 1px solid var(--border-light);
    border-radius: 8px;
    color: var(--text-primary);
    font-size: 1.125rem;
    font-family: inherit;
    transition: all 0.3s ease;
}

.form-input:focus {
    outline: none;
    border-color: var(--border-medium);
    background: var(--bg-primary);
    box-shadow: 0 0 0 3px rgba(255,255,255,0.05);
}

.form-input::placeholder {
    color: var(--text-tertiary);
}

.result-card {
    padding: 1.5rem;
    background: linear-gradient(135deg, rgba(255,255,255,0.08) 0%, rgba(255,255,255,0.03) 100%);
    border: 1px solid var(--border-light);
    border-radius: 12px;
    text-align: center;
}

.result-label {
    font-size: 0.875rem;
    font-weight: 600;
    color: var(--text-secondary);
    text-transform: uppercase;
    letter-spacing: 0.05em;
    margin-bottom: 0.75rem;
}

.result-value {
    font-size: 2.5rem;
    font-weight: 700;
    letter-spacing: -0.02em;
    background: linear-gradient(135deg, #ffffff 0%, #888888 100%);
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    background-clip: text;
    transition: all 0.3s ease;
}

.rate-info {
    margin-top: 1.5rem;
    padding: 1rem;
    background: var(--bg-secondary);
    border-radius: 8px;
    font-size: 0.875rem;
    color: var(--text-secondary);
    text-align: center;
}

.affiliators-list {
    max-height: 500px;
    overflow-y: auto;
    padding-right: 0.5rem;
}

.affiliators-list::-webkit-scrollbar {
    width: 6px;
}

.affiliators-list::-webkit-scrollbar-track {
    background: var(--bg-secondary);
    border-radius: 3px;
}

.affiliators-list::-webkit-scrollbar-thumb {
    background: var(--border-medium);
    border-radius: 3px;
}

.affiliators-list::-webkit-scrollbar-thumb:hover {
    background: var(--text-tertiary);
}

.affiliator-item {
    display: flex;
    align-items: center;
    gap: 1rem;
    padding: 1rem;
    background: linear-gradient(135deg, rgba(255,255,255,0.04) 0%, rgba(255,255,255,0.02) 100%);
    border: 1px solid var(--border-light);
    border-radius: 10px;
    margin-bottom: 0.75rem;
    transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
}

.affiliator-item:hover {
    background: linear-gradient(135deg, rgba(255,255,255,0.08) 0%, rgba(255,255,255,0.04) 100%);
    border-color: var(--border-medium);
    transform: translateX(4px);
}

.affiliator-rank {
    min-width: 40px;
    height: 40px;
    background: linear-gradient(135deg, rgba(255,255,255,0.08) 0%, rgba(255,255,255,0.03) 100%);
    border: 1px solid var(--border-light);
    border-radius: 8px;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 0.875rem;
    font-weight: 700;
    color: var(--text-secondary);
}

.affiliator-rank.top-1 {
    background: linear-gradient(135deg, #fef3c7 0%, #fde68a 100%);
    color: #92400e;
    border-color: #fde68a;
}

.affiliator-rank.top-2 {
    background: linear-gradient(135deg, #e5e7eb 0%, #d1d5db 100%);
    color: #374151;
    border-color: #d1d5db;
}

.affiliator-rank.top-3 {
    background: linear-gradient(135deg, #fed7aa 0%, #fdba74 100%);
    color: #9a3412;
    border-color: #fdba74;
}

.affiliator-avatar {
    width: 48px;
    height: 48px;
    min-width: 48px;
    background: #000000;
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    color: var(--text-primary);
    font-size: 1.5rem;
    font-weight: 600;
    border: 2px solid var(--border-light);
}

.affiliator-info {
    flex: 1;
    min-width: 0;
}

.affiliator-username {
    font-size: 0.9375rem;
    font-weight: 700;
    color: var(--text-primary);
    margin-bottom: 0.25rem;
    overflow: hidden;
    text-overflow: ellipsis;
    white-space: nowrap;
}

.affiliator-earnings {
    font-size: 0.8125rem;
    color: var(--text-secondary);
}

.affiliator-robux {
    font-size: 1.125rem;
    font-weight: 700;
    color: var(--success);
    white-space: nowrap;
}

.affiliators-empty {
    text-align: center;
    padding: 3rem 2rem;
    color: var(--text-tertiary);
    font-size: 0.9375rem;
}

.comments-main-section {
    padding: 4rem 0;
    animation: fadeInUp 0.8s ease both;
}

.comments-container {
    display: grid;
    gap: 2rem;
}

.comments-form-wrapper {
    background: var(--bg-primary);
    border: 1px solid var(--border-light);
    border-radius: 12px;
    padding: 2rem;
    animation: fadeInUp 0.6s ease-out backwards;
}

.comment-form-main {
    display: flex;
    flex-direction: column;
    gap: 1rem;
}

.comment-input-main {
    width: 100%;
    padding: 1rem;
    background: var(--bg-secondary);
    border: 1px solid var(--border-light);
    border-radius: 8px;
    color: var(--text-primary);
    font-size: 0.9375rem;
    font-family: inherit;
    resize: vertical;
    min-height: 100px;
    transition: all 0.3s ease;
}

.comment-input-main:focus {
    outline: none;
    border-color: var(--border-medium);
    background: var(--bg-primary);
    box-shadow: 0 0 0 3px rgba(255,255,255,0.05);
}

.comment-input-main::placeholder {
    color: var(--text-tertiary);
}

.comment-form-footer {
    display: flex;
    justify-content: space-between;
    align-items: center;
}

.comment-counter {
    font-size: 0.8125rem;
    color: var(--text-tertiary);
    font-weight: 500;
}

.comment-submit-main {
    padding: 0.75rem 2rem;
    background: linear-gradient(135deg, #ffffff 0%, #e5e5e5 100%);
    color: var(--bg-primary);
    border: none;
    border-radius: 8px;
    font-size: 0.9375rem;
    font-weight: 600;
    cursor: pointer;
    transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
    position: relative;
    overflow: hidden;
    -webkit-tap-highlight-color: transparent;
    touch-action: manipulation;
}

.comment-submit-main::before {
    content: '';
    position: absolute;
    top: 0;
    left: -100%;
    width: 100%;
    height: 100%;
    background: linear-gradient(90deg, transparent, rgba(255,255,255,0.4), transparent);
    transition: left 0.6s;
    pointer-events: none;
}

.comment-submit-main:hover::before {
    left: 100%;
}

.comment-submit-main:hover {
    transform: translateY(-2px);
    box-shadow: 0 6px 20px rgba(255,255,255,0.25);
}

.comment-submit-main:disabled {
    opacity: 0.5;
    cursor: not-allowed;
    transform: none;
}

.comment-error {
    font-size: 0.875rem;
    color: var(--danger);
    padding: 0.75rem 1rem;
    background: rgba(239, 68, 68, 0.1);
    border-radius: 6px;
    border: 1px solid rgba(239, 68, 68, 0.2);
    display: none;
}

.comment-error:not(:empty) {
    display: block;
}

.comments-list-main {
    display: grid;
    gap: 1.25rem;
}

.comment-item {
    display: flex;
    gap: 1rem;
    padding: 1.5rem;
    background: var(--bg-primary);
    border: 1px solid var(--border-light);
    border-radius: 12px;
    transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
    animation: fadeInUp 0.4s ease-out backwards;
}

.comment-item:hover {
    border-color: var(--border-medium);
    box-shadow: var(--shadow-md);
    transform: translateY(-2px);
}

.comment-avatar {
    width: 48px;
    height: 48px;
    min-width: 48px;
    background: #000000;
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    color: var(--text-primary);
    font-size: 1.5rem;
    font-weight: 600;
    border: 2px solid var(--border-light);
}

.comment-content {
    flex: 1;
}

.comment-author {
    font-size: 0.9375rem;
    font-weight: 700;
    color: var(--text-primary);
    margin-bottom: 0.5rem;
}

.comment-text {
    font-size: 0.9375rem;
    color: var(--text-secondary);
    line-height: 1.6;
    word-wrap: break-word;
}

.comment-empty {
    text-align: center;
    padding: 4rem 2rem;
    color: var(--text-tertiary);
    font-size: 0.9375rem;
    background: var(--bg-primary);
    border: 1px solid var(--border-light);
    border-radius: 12px;
}

.comments-pagination {
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 1rem;
    margin-top: 2rem;
    padding: 1.5rem;
    background: var(--bg-primary);
    border: 1px solid var(--border-light);
    border-radius: 12px;
}

.pagination-btn {
    padding: 0.75rem 1.5rem;
    background: linear-gradient(135deg, rgba(255,255,255,0.08) 0%, rgba(255,255,255,0.03) 100%);
    border: 1px solid var(--border-light);
    border-radius: 8px;
    color: var(--text-primary);
    font-size: 0.875rem;
    font-weight: 600;
    cursor: pointer;
    transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
    -webkit-tap-highlight-color: transparent;
    touch-action: manipulation;
}

.pagination-btn:hover:not(:disabled) {
    background: linear-gradient(135deg, rgba(255,255,255,0.15) 0%, rgba(255,255,255,0.08) 100%);
    border-color: var(--border-medium);
    transform: translateY(-2px);
}

.pagination-btn:active:not(:disabled) {
    transform: translateY(0);
}

.pagination-btn:disabled {
    opacity: 0.3;
    cursor: not-allowed;
}

.pagination-numbers {
    display: flex;
    gap: 0.5rem;
    align-items: center;
}

.pagination-number {
    min-width: 40px;
    height: 40px;
    display: flex;
    align-items: center;
    justify-content: center;
    background: linear-gradient(135deg, rgba(255,255,255,0.08) 0%, rgba(255,255,255,0.03) 100%);
    border: 1px solid var(--border-light);
    border-radius: 8px;
    color: var(--text-primary);
    font-size: 0.875rem;
    font-weight: 600;
    cursor: pointer;
    transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
    -webkit-tap-highlight-color: transparent;
    touch-action: manipulation;
}

.pagination-number:hover {
    background: linear-gradient(135deg, rgba(255,255,255,0.15) 0%, rgba(255,255,255,0.08) 100%);
    border-color: var(--border-medium);
    transform: scale(1.1);
}

.pagination-number:active {
    transform: scale(1);
}

.pagination-number.active {
    background: linear-gradient(135deg, #ffffff 0%, #e5e5e5 100%);
    color: var(--bg-primary);
    border-color: transparent;
}

.comments-header {
    display: none;
}

.sidebar-footer {
    margin-top: auto;
    padding-top: 2rem;
    border-top: 1px solid var(--border-light);
}

.contact-card {
    padding: 1.25rem;
    background: var(--bg-secondary);
    border-radius: 10px;
    border: 1px solid var(--border-light);
}

.contact-title {
    font-size: 0.875rem;
    font-weight: 600;
    margin-bottom: 0.5rem;
}

.contact-text {
    font-size: 0.8125rem;
    color: var(--text-secondary);
    margin-bottom: 1rem;
}

.contact-button {
    display: block;
    width: 100%;
    padding: 0.625rem;
    background: linear-gradient(135deg, #ffffff 0%, #e5e5e5 100%);
    color: var(--bg-primary);
    text-align: center;
    border-radius: 6px;
    text-decoration: none;
    font-size: 0.875rem;
    font-weight: 600;
    transition: all var(--transition);
    position: relative;
    overflow: hidden;
    -webkit-tap-highlight-color: transparent;
    touch-action: manipulation;
}

.contact-button::before {
    content: '';
    position: absolute;
    top: 0;
    left: -100%;
    width: 100%;
    height: 100%;
    background: linear-gradient(90deg, transparent, rgba(255,255,255,0.3), transparent);
    transition: left 0.5s;
    pointer-events: none;
}

.contact-button:hover::before {
    left: 100%;
}

.contact-button:hover {
    transform: translateY(-2px) scale(1.02);
    box-shadow: 0 4px 12px rgba(255,255,255,0.3), 0 0 20px rgba(255,255,255,0.1);
}

.contact-button:active {
    transform: translateY(0) scale(0.98);
}

.main-content {
    flex: 1;
    margin-left: 280px;
    background: var(--bg-secondary);
}

.topbar {
    background: var(--bg-primary);
    border-bottom: 1px solid var(--border-light);
    padding: 1.25rem 2rem;
    position: sticky;
    top: 0;
    z-index: 90;
    display: flex;
    align-items: center;
    justify-content: space-between;
}

.menu-toggle {
    display: none;
    background: none;
    border: none;
    font-size: 1.5rem;
    cursor: pointer;
    padding: 0.5rem;
    color: var(--text-primary);
    -webkit-tap-highlight-color: transparent;
    touch-action: manipulation;
    user-select: none;
}

.page-title {
    font-size: 1.5rem;
    font-weight: 700;
    letter-spacing: -0.02em;
    background: linear-gradient(135deg, #ffffff 0%, #888888 100%);
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    background-clip: text;
}

.topbar-actions {
    display: flex;
    gap: 1rem;
    align-items: center;
}

.status-badge {
    display: flex;
    align-items: center;
    gap: 0.5rem;
    padding: 0.5rem 1rem;
    background: var(--bg-secondary);
    border-radius: 20px;
    font-size: 0.8125rem;
    font-weight: 500;
}

.status-dot {
    width: 8px;
    height: 8px;
    background: var(--success);
    border-radius: 50%;
    animation: pulse-dot 2s ease-in-out infinite;
}

@keyframes pulse-dot {
    0%, 100% { opacity: 1; }
    50% { opacity: 0.5; }
}

@keyframes fadeInUp {
    from {
        opacity: 0;
        transform: translateY(30px);
    }
    to {
        opacity: 1;
        transform: translateY(0);
    }
}

@keyframes slideInLeft {
    from {
        opacity: 0;
        transform: translateX(-30px);
    }
    to {
        opacity: 1;
        transform: translateX(0);
    }
}

@keyframes shimmer {
    0% {
        background-position: -1000px 0;
    }
    100% {
        background-position: 1000px 0;
    }
}

@keyframes float {
    0%, 100% {
        transform: translateY(0px);
    }
    50% {
        transform: translateY(-10px);
    }
}

@keyframes glow {
    0%, 100% {
        box-shadow: 0 0 20px rgba(255,255,255,0.1);
    }
    50% {
        box-shadow: 0 0 30px rgba(255,255,255,0.2);
    }
}

@keyframes counterUp {
    from {
        opacity: 0;
        transform: scale(0.8);
    }
    to {
        opacity: 1;
        transform: scale(1);
    }
}

@keyframes ripple {
    0% {
        transform: scale(0);
        opacity: 1;
    }
    100% {
        transform: scale(4);
        opacity: 0;
    }
}

.content-wrapper {
    padding: 2rem;
    max-width: 1600px;
}

.stats-section {
    margin-bottom: 2.5rem;
}

.stats-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
    gap: 1.25rem;
}

.stat-card {
    background: var(--bg-primary);
    border: 1px solid var(--border-light);
    border-radius: 12px;
    padding: 1.75rem;
    transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
    animation: fadeInUp 0.6s ease-out backwards;
    position: relative;
    overflow: hidden;
}

.stat-card::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    height: 2px;
    background: linear-gradient(90deg, transparent, rgba(255,255,255,0.3), transparent);
    transform: translateX(-100%);
    transition: transform 0.6s;
}

.stat-card:hover::before {
    transform: translateX(100%);
}

.stat-card:hover {
    border-color: var(--border-medium);
    box-shadow: var(--shadow-md), 0 0 30px rgba(255,255,255,0.05);
    transform: translateY(-4px) scale(1.02);
}

.stat-card:nth-child(1) { animation-delay: 0.1s; }
.stat-card:nth-child(2) { animation-delay: 0.2s; }
.stat-card:nth-child(3) { animation-delay: 0.3s; }

.stat-header {
    display: flex;
    align-items: center;
    justify-content: space-between;
    margin-bottom: 1.25rem;
}

.stat-label {
    font-size: 0.8125rem;
    font-weight: 600;
    color: var(--text-secondary);
    text-transform: uppercase;
    letter-spacing: 0.05em;
}

.stat-icon {
    width: 40px;
    height: 40px;
    background: linear-gradient(135deg, rgba(255,255,255,0.08) 0%, rgba(255,255,255,0.03) 100%);
    border: 1px solid var(--border-light);
    border-radius: 10px;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 1.25rem;
    transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
}

.stat-card:hover .stat-icon {
    transform: rotate(360deg) scale(1.15);
    background: linear-gradient(135deg, rgba(255,255,255,0.15) 0%, rgba(255,255,255,0.08) 100%);
    box-shadow: 0 0 20px rgba(255,255,255,0.1);
}

.stat-value {
    font-size: 2.25rem;
    font-weight: 700;
    letter-spacing: -0.02em;
    margin-bottom: 0.5rem;
    background: linear-gradient(135deg, #ffffff 0%, #888888 100%);
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    background-clip: text;
    animation: counterUp 0.6s cubic-bezier(0.4, 0, 0.2, 1) backwards;
    transition: all 0.3s ease;
}

.stat-card:hover .stat-value {
    filter: brightness(1.2);
}

.stat-description {
    font-size: 0.875rem;
    color: var(--text-secondary);
}

.stat-footer {
    margin-top: 1.25rem;
    padding-top: 1.25rem;
    border-top: 1px solid var(--border-light);
    font-size: 0.8125rem;
    color: var(--text-tertiary);
}

.section-header {
    display: flex;
    align-items: center;
    justify-content: space-between;
    margin-bottom: 1.5rem;
}

.section-title {
    font-size: 1.25rem;
    font-weight: 700;
    letter-spacing: -0.01em;
    position: relative;
    display: inline-block;
    transition: all 0.3s ease;
}

.section-title::after {
    content: '';
    position: absolute;
    bottom: -4px;
    left: 0;
    width: 0;
    height: 2px;
    background: linear-gradient(90deg, #ffffff 0%, transparent 100%);
    transition: width 0.4s cubic-bezier(0.4, 0, 0.2, 1);
}

.section-header:hover .section-title::after {
    width: 100%;
}

.section-description {
    font-size: 0.875rem;
    color: var(--text-secondary);
}

.filter-tabs {
    display: flex;
    gap: 0.5rem;
    background: var(--bg-primary);
    padding: 0.375rem;
    border-radius: 10px;
    border: 1px solid var(--border-light);
}

.filter-tab {
    padding: 0.5rem 1rem;
    background: transparent;
    border: none;
    border-radius: 6px;
    font-size: 0.875rem;
    font-weight: 500;
    color: var(--text-secondary);
    cursor: pointer;
    transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
    position: relative;
    -webkit-tap-highlight-color: transparent;
    touch-action: manipulation;
}

.filter-tab::before {
    content: '';
    position: absolute;
    inset: 0;
    border-radius: 6px;
    background: linear-gradient(135deg, rgba(255,255,255,0.05), transparent);
    opacity: 0;
    transition: opacity 0.3s;
}

.filter-tab:hover::before {
    opacity: 1;
}

.filter-tab:hover {
    color: var(--text-primary);
    transform: translateY(-2px);
}

.filter-tab.active {
    background: linear-gradient(135deg, #ffffff 0%, #e5e5e5 100%);
    color: var(--bg-primary);
    box-shadow: 0 2px 8px rgba(255,255,255,0.2);
}

.products-grid {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(320px, 1fr));
    gap: 1.25rem;
    margin-bottom: 2.5rem;
}

.product-card {
    background: var(--bg-primary);
    border: 1px solid var(--border-light);
    border-radius: 12px;
    overflow: hidden;
    transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
    display: flex;
    flex-direction: column;
    animation: fadeInUp 0.6s ease-out backwards;
    position: relative;
}

.product-card::after {
    content: '';
    position: absolute;
    top: -50%;
    left: -50%;
    width: 200%;
    height: 200%;
    background: radial-gradient(circle, rgba(255,255,255,0.03) 0%, transparent 70%);
    opacity: 0;
    transition: opacity 0.4s;
    pointer-events: none;
}

.product-card:hover::after {
    opacity: 1;
}

.product-card:hover {
    border-color: var(--border-medium);
    box-shadow: var(--shadow-lg), 0 0 40px rgba(255,255,255,0.08);
    transform: translateY(-8px) scale(1.02);
}

.product-card.out-of-stock {
    opacity: 0.6;
}

.product-card:nth-child(1) { animation-delay: 0.1s; }
.product-card:nth-child(2) { animation-delay: 0.15s; }
.product-card:nth-child(3) { animation-delay: 0.2s; }
.product-card:nth-child(4) { animation-delay: 0.25s; }
.product-card:nth-child(5) { animation-delay: 0.3s; }
.product-card:nth-child(6) { animation-delay: 0.35s; }

.product-header {
    padding: 1.5rem;
    border-bottom: 1px solid var(--border-light);
    position: relative;
}

.product-badge {
    position: absolute;
    top: 1rem;
    right: 1rem;
    padding: 0.375rem 0.75rem;
    border-radius: 6px;
    font-size: 0.6875rem;
    font-weight: 700;
    text-transform: uppercase;
    letter-spacing: 0.05em;
    animation: fadeInUp 0.8s ease-out backwards;
    box-shadow: 0 4px 12px rgba(0,0,0,0.3);
    transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
}

.product-card:hover .product-badge {
    transform: scale(1.1) translateY(-2px);
    box-shadow: 0 6px 20px rgba(0,0,0,0.4);
}

.badge-popular { 
    background: linear-gradient(135deg, #fef3c7 0%, #fde68a 100%); 
    color: #92400e; 
}

.badge-best-value { 
    background: linear-gradient(135deg, #dbeafe 0%, #bfdbfe 100%); 
    color: #1e40af; 
}

.badge-hot-deal { 
    background: linear-gradient(135deg, #fee2e2 0%, #fecaca 100%); 
    color: #991b1b; 
    animation: glow 2s ease-in-out infinite;
}

.badge-trending { 
    background: linear-gradient(135deg, #d1fae5 0%, #a7f3d0 100%); 
    color: #065f46; 
}

.badge-limited { 
    background: linear-gradient(135deg, #e9d5ff 0%, #d8b4fe 100%); 
    color: #6b21a8; 
}

.badge-new { 
    background: linear-gradient(135deg, #fce7f3 0%, #fbcfe8 100%); 
    color: #9f1239; 
}

.stock-badge {
    background: linear-gradient(135deg, var(--danger) 0%, #dc2626 100%);
    color: white;
    animation: pulse-dot 2s ease-in-out infinite;
}

.product-icon-wrapper {
    width: 64px;
    height: 64px;
    background: linear-gradient(135deg, rgba(255,255,255,0.08) 0%, rgba(255,255,255,0.03) 100%);
    border: 1px solid var(--border-light);
    border-radius: 12px;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 2rem;
    margin-bottom: 1rem;
    transition: all 0.5s cubic-bezier(0.4, 0, 0.2, 1);
}

.product-card:hover .product-icon-wrapper {
    transform: rotate(360deg) scale(1.1);
    background: linear-gradient(135deg, rgba(255,255,255,0.15) 0%, rgba(255,255,255,0.08) 100%);
    box-shadow: 0 0 30px rgba(255,255,255,0.15);
    border-color: var(--border-medium);
}

.product-tier {
    font-size: 0.75rem;
    font-weight: 700;
    color: var(--text-tertiary);
    text-transform: uppercase;
    letter-spacing: 0.08em;
    margin-bottom: 0.5rem;
}

.product-name {
    font-size: 1.125rem;
    font-weight: 700;
    letter-spacing: -0.01em;
}

.product-body {
    padding: 1.5rem;
    flex-grow: 1;
}

.product-amount {
    margin-bottom: 1.25rem;
}

.amount-value {
    font-size: 2rem;
    font-weight: 700;
    letter-spacing: -0.02em;
    margin-bottom: 0.25rem;
    background: linear-gradient(135deg, #ffffff 0%, #888888 100%);
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    background-clip: text;
    transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
}

.product-card:hover .amount-value {
    filter: brightness(1.2);
}

.amount-label {
    font-size: 0.875rem;
    color: var(--text-secondary);
}

.product-stats {
    display: flex;
    align-items: center;
    gap: 0.625rem;
    padding: 0.875rem;
    background: linear-gradient(135deg, rgba(255,255,255,0.04) 0%, rgba(255,255,255,0.02) 100%);
    border: 1px solid var(--border-light);
    border-radius: 8px;
    margin-bottom: 1.25rem;
    font-size: 0.875rem;
    color: var(--text-secondary);
    transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
}

.product-card:hover .product-stats {
    background: linear-gradient(135deg, rgba(255,255,255,0.08) 0%, rgba(255,255,255,0.04) 100%);
    border-color: var(--border-medium);
    transform: translateX(4px);
}

.stats-icon {
    transition: transform 0.3s cubic-bezier(0.4, 0, 0.2, 1);
}

.product-card:hover .stats-icon {
    transform: rotate(360deg) scale(1.2);
}

.stats-number {
    font-weight: 700;
    color: var(--success);
    transition: all 0.3s ease;
}

.product-card:hover .stats-number {
    color: #34d399;
    text-shadow: 0 0 10px rgba(52,211,153,0.5);
}

.product-price {
    margin-bottom: 1.25rem;
}

.price-value {
    font-size: 1.75rem;
    font-weight: 700;
    letter-spacing: -0.02em;
    margin-bottom: 0.25rem;
    background: linear-gradient(135deg, #ffffff 0%, #888888 100%);
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    background-clip: text;
    transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
}

.product-card:hover .price-value {
    filter: brightness(1.2);
}

.price-label {
    font-size: 0.8125rem;
    color: var(--text-secondary);
}

.product-footer {
    padding: 0 1.5rem 1.5rem;
}

.order-button {
    display: block;
    width: 100%;
    padding: 0.875rem;
    background: linear-gradient(135deg, #ffffff 0%, #e5e5e5 100%);
    color: var(--bg-primary);
    text-align: center;
    border: none;
    border-radius: 8px;
    font-size: 0.9375rem;
    font-weight: 600;
    text-decoration: none;
    cursor: pointer;
    transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
    position: relative;
    overflow: hidden;
    -webkit-tap-highlight-color: transparent;
    touch-action: manipulation;
}

.order-button::before {
    content: '';
    position: absolute;
    top: 0;
    left: -100%;
    width: 100%;
    height: 100%;
    background: linear-gradient(90deg, transparent, rgba(255,255,255,0.4), transparent);
    transition: left 0.6s;
    pointer-events: none;
}

.order-button::after {
    content: '';
    position: absolute;
    inset: 0;
    border-radius: 8px;
    padding: 2px;
    background: linear-gradient(135deg, rgba(255,255,255,0.3), rgba(255,255,255,0.1));
    -webkit-mask: linear-gradient(#fff 0 0) content-box, linear-gradient(#fff 0 0);
    -webkit-mask-composite: xor;
    mask-composite: exclude;
    opacity: 0;
    transition: opacity 0.3s;
}

.order-button:hover::before {
    left: 100%;
}

.order-button:hover::after {
    opacity: 1;
}

.order-button:hover {
    transform: translateY(-3px) scale(1.02);
    box-shadow: 0 8px 20px rgba(255,255,255,0.3), 0 0 30px rgba(255,255,255,0.15);
}

.order-button:active {
    transform: translateY(-1px) scale(1);
}

.order-button.disabled {
    background: var(--text-tertiary);
    cursor: not-allowed;
    pointer-events: none;
}

.terms-section {
    background: var(--bg-primary);
    border: 1px solid var(--border-light);
    border-radius: 12px;
    padding: 2rem;
    margin-bottom: 2rem;
    animation: fadeInUp 0.8s ease-out backwards;
    animation-delay: 0.4s;
}

.terms-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
    gap: 2rem;
}

.terms-item {
    padding-left: 1.5rem;
    position: relative;
    transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
}

.terms-item:hover {
    transform: translateX(8px);
}

.terms-item::before {
    content: '';
    position: absolute;
    left: 0;
    top: 0.375rem;
    width: 4px;
    height: 1.25rem;
    background: linear-gradient(180deg, #ffffff 0%, #888888 100%);
    border-radius: 2px;
    transition: all 0.3s ease;
}

.terms-item:hover::before {
    height: 2rem;
    box-shadow: 0 0 10px rgba(255,255,255,0.3);
}

.terms-title {
    font-size: 1rem;
    font-weight: 700;
    margin-bottom: 0.625rem;
}

.terms-text {
    font-size: 0.9375rem;
    color: var(--text-secondary);
    line-height: 1.6;
}

.footer {
    background: var(--bg-primary);
    border-top: 1px solid var(--border-light);
    padding: 2rem;
    text-align: center;
}

.footer-text {
    font-size: 0.875rem;
    color: var(--text-secondary);
    margin-bottom: 0.375rem;
}

.footer-small {
    font-size: 0.8125rem;
    color: var(--text-tertiary);
}

.loading {
    text-align: center;
    padding: 3rem;
    color: var(--text-secondary);
    font-size: 0.9375rem;
}
    
@media (max-width: 1024px) {
    .products-grid {
        grid-template-columns: repeat(2, 1fr);
    }
}

@media (max-width: 768px) {
    .sidebar {
        transform: translateX(-100%);
        box-shadow: 2px 0 20px rgba(0,0,0,0.5);
    }

    .sidebar.active {
        transform: translateX(0);
    }

    .main-content {
        margin-left: 0;
    }

    .menu-toggle {
        display: block;
    }

    .topbar {
        padding: 1rem 1.25rem;
    }

    .page-title {
        font-size: 1.25rem;
    }

    .status-badge {
        display: none;
    }

    .content-wrapper {
        padding: 1.25rem;
    }

    .products-grid {
        grid-template-columns: 1fr;
    }

    .terms-grid {
        grid-template-columns: 1fr;
        gap: 1.5rem;
    }

    .filter-tabs {
        overflow-x: auto;
    }

    .comments-pagination {
        flex-wrap: wrap;
        gap: 0.75rem;
        padding: 1rem;
    }

    .pagination-btn {
        padding: 0.625rem 1rem;
        font-size: 0.8125rem;
    }

    .pagination-number {
        min-width: 36px;
        height: 36px;
        font-size: 0.8125rem;
    }

    .modal-content {
        padding: 1.5rem;
    }
}

@media (max-width: 480px) {
    .stats-grid {
        grid-template-columns: 1fr;
    }

    .section-header {
        flex-direction: column;
        align-items: flex-start;
        gap: 1rem;
    }
}

@media (prefers-reduced-motion: reduce) {
    *,
    *::before,
    *::after {
        animation-duration: 0.01ms !important;
        animation-iteration-count: 1 !important;
        transition-duration: 0.01ms !important;
    }
}

a:focus-visible,
button:focus-visible {
    outline: 2px solid var(--accent);
    outline-offset: 2px;
}

/* Print Support */
@media print {
    @page {
        margin: 1.5cm;
    }
    
    body {
        background: white !important;
        color: black !important;
    }
    
    body::before,
    body::after {
        display: none !important;
    }
    
    .sidebar,
    .topbar,
    .menu-toggle,
    .calculator-button,
    .modal,
    .comment-form-main,
    .comments-pagination,
    .order-button,
    .contact-button,
    .status-badge {
        display: none !important;
    }
    
    .main-content {
        margin-left: 0 !important;
    }
    
    .content-wrapper {
        padding: 0 !important;
    }
    
    .product-card,
    .stat-card,
    .comment-item,
    .terms-section {
        break-inside: avoid;
        page-break-inside: avoid;
        border: 1px solid #ddd !important;
        box-shadow: none !important;
    }
    
    .products-grid,
    .stats-grid {
        display: block !important;
    }
    
    .product-card,
    .stat-card {
        margin-bottom: 1rem !important;
    }
    
    a {
        text-decoration: underline !important;
    }
    
    a[href]:after {
        content: " (" attr(href) ")";
        font-size: 0.8em;
    }
}
        .referral-modal {
            display: none;
            position: fixed;
            inset: 0;
            background: rgba(0,0,0,0.95);
            z-index: 2000;
            align-items: center;
            justify-content: center;
            padding: 1rem;
            animation: fadeIn 0.3s ease;
        }

        .referral-modal.active {
            display: flex;
        }

        .referral-content {
            background: var(--bg-primary);
            border: 1px solid var(--border-medium);
            border-radius: 16px;
            padding: 2.5rem;
            max-width: 500px;
            width: 100%;
            animation: slideUp 0.4s cubic-bezier(0.4, 0, 0.2, 1);
            position: relative;
            box-shadow: 0 20px 60px rgba(0,0,0,0.8);
        }

        .referral-icon {
            width: 64px;
            height: 64px;
            background: linear-gradient(135deg, rgba(34,197,94,0.2) 0%, rgba(34,197,94,0.1) 100%);
            border: 2px solid var(--success);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 2rem;
            margin: 0 auto 1.5rem;
            animation: pulse 2s ease-in-out infinite;
        }

        .referral-title {
            font-size: 1.5rem;
            font-weight: 700;
            text-align: center;
            margin-bottom: 1rem;
            background: linear-gradient(135deg, #ffffff 0%, #888888 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .referral-message {
            font-size: 1rem;
            color: var(--text-secondary);
            text-align: center;
            margin-bottom: 2rem;
            line-height: 1.6;
        }

        .referral-code {
            display: inline-block;
            padding: 0.5rem 1rem;
            background: linear-gradient(135deg, rgba(255,255,255,0.08) 0%, rgba(255,255,255,0.03) 100%);
            border: 1px solid var(--border-light);
            border-radius: 8px;
            font-weight: 700;
            color: var(--success);
            font-family: 'Courier New', monospace;
        }

        .referral-buttons {
            display: flex;
            gap: 1rem;
        }

        .referral-btn {
            flex: 1;
            padding: 1rem;
            border: none;
            border-radius: 8px;
            font-size: 1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        }

        .referral-btn-yes {
            background: linear-gradient(135deg, var(--success) 0%, #16a34a 100%);
            color: white;
        }

        .referral-btn-yes:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 20px rgba(34,197,94,0.4);
        }

        .referral-btn-no {
            background: linear-gradient(135deg, rgba(255,255,255,0.08) 0%, rgba(255,255,255,0.03) 100%);
            border: 1px solid var(--border-light);
            color: var(--text-primary);
        }

        .referral-btn-no:hover {
            background: linear-gradient(135deg, rgba(255,255,255,0.15) 0%, rgba(255,255,255,0.08) 100%);
            border-color: var(--border-medium);
        }

        @keyframes pulse {
            0%, 100% {
                transform: scale(1);
                box-shadow: 0 0 0 0 rgba(34,197,94,0.7);
            }
            50% {
                transform: scale(1.05);
                box-shadow: 0 0 0 10px rgba(34,197,94,0);
            }
        }

        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }

        @keyframes slideUp {
            from {
                opacity: 0;
                transform: translateY(20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        @media (max-width: 768px) {
            .referral-content {
                padding: 2rem 1.5rem;
            }
            .referral-buttons {
                flex-direction: column;
            }
        }
    </style>
</head>
<body>

<!-- Referral Modal -->
<div class="referral-modal" id="referralModal">
    <div class="referral-content">
        <div class="referral-icon">üéÅ</div>
        <h2 class="referral-title">Affiliate Invitation!</h2>
        <p class="referral-message">
            An affiliate seems to have invited you to purchase in this shop.<br>
            Referral Code: <span class="referral-code" id="referralCodeDisplay"></span><br><br>
            Is this correct?
        </p>
        <div class="referral-buttons">
            <button class="referral-btn referral-btn-yes" id="confirmReferral">
                ‚úì Yes, Continue
            </button>
            <button class="referral-btn referral-btn-no" id="declineReferral">
                ‚úó No, Thanks
            </button>
        </div>
    </div>
</div>
    
<!-- Calculator Modal -->
<div class="modal" id="calculatorModal">
    <div class="modal-content">
        <div class="modal-header">
            <h2 class="modal-title">Currency Calculator</h2>
            <button class="modal-close" id="closeCalculator">√ó</button>
        </div>
        
        <div class="converter-tabs">
            <button class="converter-tab active" data-mode="php-to-robux">PHP to Robux</button>
            <button class="converter-tab" data-mode="robux-to-php">Robux to PHP</button>
        </div>
        
        <form class="converter-form" id="converterForm">
            <div class="form-group">
                <label class="form-label" id="inputLabel">Enter Amount (PHP)</label>
                <input 
                    type="number" 
                    class="form-input" 
                    id="converterInput" 
                    placeholder="0.00"
                    min="0"
                    step="0.01"
                />
            </div>
            
            <div class="result-card">
                <div class="result-label" id="resultLabel">Robux Amount</div>
                <div class="result-value" id="resultValue">0</div>
            </div>
            
            <div class="rate-info">
                Exchange rates: <strong id="rateDisplay">‚Ç±10 = 25 Robux ‚Ä¢ ‚Ç±40 = 100 Robux ‚Ä¢ ‚Ç±120 = 300 Robux</strong>
            </div>
        </form>
    </div>
</div>

<!-- Affiliators Modal -->
<div class="modal" id="affiliatorsModal">
    <div class="modal-content" style="max-width: 600px;">
        <div class="modal-header">
            <h2 class="modal-title">Top Affiliators</h2>
            <button class="modal-close" id="closeAffiliators">√ó</button>
        </div>
        
        <div class="affiliators-info" style="margin-bottom: 1.5rem; padding: 1rem; background: linear-gradient(135deg, rgba(255,255,255,0.04) 0%, rgba(255,255,255,0.02) 100%); border: 1px solid var(--border-light); border-radius: 8px; font-size: 0.875rem; color: var(--text-secondary); text-align: center;">
            Earn <strong style="color: var(--success);">10% Robux commission</strong> on every referral purchase
        </div>
        
        <div class="affiliators-list" id="affiliatorsList">
            <div class="loading" style="padding: 2rem;">Loading leaderboard...</div>
        </div>
    </div>
</div>

<div class="app-container">
    <aside class="sidebar" id="sidebar">
        <div class="sidebar-header">
            <div class="brand">
                <div class="brand-icon">‚è£</div>
                <div class="brand-name">Don Digital</div>
            </div>
            <div class="brand-tagline">Roblox Products :|</div>
        </div>

        <nav>
            <ul class="nav-menu">
                <li class="nav-item">
                    <a href="#products" class="nav-link active" data-section="products">
                        <span class="nav-icon">‚óÜ</span>
                        <span>Products</span>
                    </a>
                </li>
                <li class="nav-item">
                    <a href="#statistics" class="nav-link" data-section="statistics">
                        <span class="nav-icon">‚óà</span>
                        <span>Statistics</span>
                    </a>
                </li>
                <li class="nav-item">
                    <a href="#comments" class="nav-link" data-section="comments">
                        <span class="nav-icon">‚óá</span>
                        <span>Comments</span>
                    </a>
                </li>
                <li class="nav-item">
                    <a href="#terms" class="nav-link" data-section="terms">
                        <span class="nav-icon">‚óà</span>
                        <span>Terms</span>
                    </a>
                </li>
            </ul>
        </nav>

        <div class="comments-section">
            <button class="calculator-button" id="calculatorBtn">
                <span class="nav-icon">‚äï</span>
                <span>Calculator</span>
            </button>
            <button class="calculator-button" id="affiliatorsBtn" style="margin-top: 0.5rem;">
                <span class="nav-icon">‚òÖ</span>
                <span>Affiliators</span>
            </button>
        </div>

        <div class="sidebar-footer">
            <div class="contact-card">
                <div class="contact-title">Need Help?</div>
                <div class="contact-text">Contact us for support or custom orders</div>
                <a href="https://www.facebook.com/profile.php?id=61586923727508" target="_blank" class="contact-button">Get in Touch</a>
            </div>
        </div>
    </aside>

    <main class="main-content">
        <div class="topbar">
            <button class="menu-toggle" id="menuToggle" aria-label="Toggle menu">‚ò∞</button>
            <h1 class="page-title">Marketplace</h1>
            <div class="topbar-actions">
                <div class="status-badge">
                    <span class="status-dot"></span>
                    <span>Online</span>
                </div>
            </div>
        </div>

        <div class="content-wrapper">
            <section class="stats-section" id="statistics">
                <div class="section-header">
                    <div>
                        <h2 class="section-title">Live Statistics</h2>
                        <p class="section-description">Real-time platform metrics</p>
                    </div>
                </div>
                <div class="stats-grid" id="statsContainer">
                    <div class="loading">Loading statistics...</div>
                </div>
            </section>

            <section id="products">
                <div class="section-header">
                    <div>
                        <h2 class="section-title">Available Products</h2>
                        <p class="section-description">Browse our product catalog</p>
                    </div>
                </div>
                <div class="products-grid" id="productsContainer">
                    <div class="loading">Loading products...</div>
                </div>
            </section>

            <section id="comments" class="comments-main-section">
                <div class="section-header">
                    <div>
                        <h2 class="section-title">Comments</h2>
                        <p class="section-description">Customer reviews and feedback</p>
                    </div>
                </div>

                <div class="comments-container">
                    <div class="comments-form-wrapper">
                        <form class="comment-form-main" id="commentForm">
                            <textarea 
                                class="comment-input-main" 
                                id="commentInput"
                                placeholder="Share your experience..."
                                maxlength="50"
                                required
                            ></textarea>
                            <div class="comment-form-footer">
                                <span class="comment-counter" id="commentCounter">0/50</span>
                                <button type="submit" class="comment-submit-main" id="commentSubmit">
                                    Post Comment
                                </button>
                            </div>
                            <div class="comment-error" id="commentError"></div>
                        </form>
                    </div>

                    <div class="comments-list-main" id="commentsList">
                        <div class="comment-empty">No comments yet. Be the first to share your experience!</div>
                    </div>

                    <div class="comments-pagination" id="commentsPagination" style="display: none;">
                        <button class="pagination-btn pagination-prev" id="prevPage" disabled>
                            ‚Üê Previous
                        </button>
                        <div class="pagination-numbers" id="paginationNumbers"></div>
                        <button class="pagination-btn pagination-next" id="nextPage">
                            Next ‚Üí
                        </button>
                    </div>
                </div>
            </section>

            <section class="terms-section" id="terms">
                <div class="section-header">
                    <div>
                        <h2 class="section-title">Terms & Conditions</h2>
                        <p class="section-description">Important purchase information</p>
                    </div>
                </div>
                <div class="terms-grid">
                    <div class="terms-item">
                        <h3 class="terms-title">Platform Tax Included</h3>
                        <p class="terms-text">All Robux amounts are NET values. Platform tax is already covered, ensuring you receive the full advertised amount.</p>
                    </div>
                    <div class="terms-item">
                        <h3 class="terms-title">Order Minimums</h3>
                        <p class="terms-text">Custom orders start at 100 Robux. Standard packages begin at 1,000 Robux. All amounts shown are net values.</p>
                    </div>
                    <div class="terms-item">
                        <h3 class="terms-title">Payment Terms</h3>
                        <p class="terms-text">All transactions are final. No refunds available after completion. No hidden fees or additional deductions.</p>
                    </div>
                    <div class="terms-item">
                        <h3 class="terms-title">Fair Pricing</h3>
                        <p class="terms-text">Our rates remain significantly below official marketplace pricing with full tax coverage included.</p>
                    </div>
                </div>
            </section>

            <footer class="footer">
                <p class="footer-text">&copy; 2026 Digital Shop. All rights reserved.</p>
                <p class="footer-small">Independently operated platform</p>
            </footer>
        </div>
    </main>
</div>

<script>
const API_URL = 'https://dondigital.vercel.app'; // Replace with your Vercel API URL

// ==========================================
// REFERRAL SYSTEM - MANUAL TRACKING
// ==========================================
let currentReferralCode = null;
let referralConfirmed = false;

// Check if URL has referral code
function checkReferralCode() {
    const urlParams = new URLSearchParams(window.location.search);
    const refCode = urlParams.get('ref');
    
    if (refCode) {
        const sessionConfirmed = sessionStorage.getItem('referralConfirmed');
        const sessionDeclined = sessionStorage.getItem('referralDeclined');
        
        if (sessionConfirmed === refCode) {
            currentReferralCode = refCode;
            referralConfirmed = true;
            return;
        }
        
        if (sessionDeclined === 'true') {
            return;
        }
        
        currentReferralCode = refCode;
        document.getElementById('referralCodeDisplay').textContent = refCode;
        document.getElementById('referralModal').classList.add('active');
        
        trackReferralClick(refCode);
    }
}

// Track click only (not conversion - you add conversion manually in SQL)
async function trackReferralClick(refCode) {
    try {
        await fetch(`${API_URL}/api/referrals/track-click`, {
            method: 'POST',
            headers: { 'Content-Type': 'application/json' },
            body: JSON.stringify({ referralCode: refCode })
        });
    } catch (error) {
        console.error('Failed to track click:', error);
    }
}

// User confirms referral
document.getElementById('confirmReferral').addEventListener('click', () => {
    referralConfirmed = true;
    sessionStorage.setItem('referralConfirmed', currentReferralCode);
    sessionStorage.removeItem('referralDeclined');
    document.getElementById('referralModal').classList.remove('active');
});

// User declines referral
document.getElementById('declineReferral').addEventListener('click', () => {
    sessionStorage.setItem('referralDeclined', 'true');
    sessionStorage.removeItem('referralConfirmed');
    currentReferralCode = null;
    referralConfirmed = false;
    const url = new URL(window.location);
    url.searchParams.delete('ref');
    window.history.replaceState({}, '', url);
    document.getElementById('referralModal').classList.remove('active');
});

// Handle product order
function orderProduct(robux, price, outOfStock) {
    if (outOfStock) return;
    
    let message = `Hello po! I want to purchase:\n\nRobux: ${robux.toLocaleString()}R$\nPrice: ${price}\n`;
    
    if (referralConfirmed && currentReferralCode) {
        message += `\nüìå Referral Code: ${currentReferralCode}\n(Please record for commission)\n`;
    }
    
    message += `\nThank you!`;
    
    const encodedMessage = encodeURIComponent(message);
    window.open(`https://www.messenger.com/e2ee/t/1596331694906146/?text=${encodedMessage}`, '_blank');
}

// Initialize on page load
checkReferralCode();

// ==========================================
// EXISTING CODE BELOW
// ==========================================

// Price list based on your actual rates
const PRICE_LIST = [
    { robux: 25, price: 10 },
    { robux: 100, price: 40 },
    { robux: 300, price: 120 },
    { robux: 750, price: 280 },
    { robux: 1500, price: 560 },
    { robux: 3000, price: 1050 },
    { robux: 5000, price: 1700 }
];

function getBadgeClass(badgeText) {
    if (!badgeText) return '';
    const text = badgeText.toLowerCase();
    if (text.includes('popular')) return 'badge-popular';
    if (text.includes('value')) return 'badge-best-value';
    if (text.includes('hot') || text.includes('deal')) return 'badge-hot-deal';
    if (text.includes('trend')) return 'badge-trending';
    if (text.includes('limited')) return 'badge-limited';
    if (text.includes('new')) return 'badge-new';
    return 'badge-popular';
}

// Calculator Modal Functionality
const calculatorBtn = document.getElementById('calculatorBtn');
const calculatorModal = document.getElementById('calculatorModal');
const closeCalculator = document.getElementById('closeCalculator');
const converterTabs = document.querySelectorAll('.converter-tab');
const converterInput = document.getElementById('converterInput');
const resultValue = document.getElementById('resultValue');
const inputLabel = document.getElementById('inputLabel');
const resultLabel = document.getElementById('resultLabel');
const rateDisplay = document.getElementById('rateDisplay');

// Affiliators Modal Functionality
const affiliatorsBtn = document.getElementById('affiliatorsBtn');
const affiliatorsModal = document.getElementById('affiliatorsModal');
const closeAffiliators = document.getElementById('closeAffiliators');

let currentMode = 'php-to-robux';

// Open calculator
calculatorBtn.addEventListener('click', () => {
    calculatorModal.classList.add('active');
    converterInput.value = '';
    resultValue.textContent = '0';
    if (window.innerWidth <= 768) {
        closeSidebar();
    }
});

// Close calculator
closeCalculator.addEventListener('click', () => {
    calculatorModal.classList.remove('active');
});

calculatorModal.addEventListener('click', (e) => {
    if (e.target === calculatorModal) {
        calculatorModal.classList.remove('active');
    }
});

// Open affiliators
affiliatorsBtn.addEventListener('click', () => {
    affiliatorsModal.classList.add('active');
    loadAffiliators();
    if (window.innerWidth <= 768) {
        closeSidebar();
    }
});

// Close affiliators
closeAffiliators.addEventListener('click', () => {
    affiliatorsModal.classList.remove('active');
});

affiliatorsModal.addEventListener('click', (e) => {
    if (e.target === affiliatorsModal) {
        affiliatorsModal.classList.remove('active');
    }
});

// Load affiliators leaderboard
async function loadAffiliators() {
    try {
        const response = await fetch(`${API_URL}/api/affiliators-updated?view=leaderboard&limit=20`);
        
        if (!response.ok) {
            throw new Error(`HTTP error! status: ${response.status}`);
        }
        
        const contentType = response.headers.get("content-type");
        if (!contentType || !contentType.includes("application/json")) {
            throw new Error("Response is not JSON");
        }
        
        const result = await response.json();
        
        if (result.success) {
            const affiliators = result.data || [];
            displayAffiliators(affiliators);
        } else {
            throw new Error('API returned success: false');
        }
    } catch (error) {
        document.getElementById('affiliatorsList').innerHTML = `
            <div class="affiliators-empty">
                <p style="margin-bottom: 0.5rem;">Unable to load affiliators</p>
                <p style="font-size: 0.8125rem;">Please try again later</p>
            </div>
        `;
    }
}

// Display affiliators
function displayAffiliators(affiliators) {
    const affiliatorsList = document.getElementById('affiliatorsList');
    
    if (affiliators.length === 0) {
        affiliatorsList.innerHTML = `
            <div class="affiliators-empty">
                <p>No affiliators yet</p>
                <p style="font-size: 0.8125rem; margin-top: 0.5rem;">Be the first to join!</p>
            </div>
        `;
        return;
    }
    
    affiliatorsList.innerHTML = affiliators.map((affiliator, index) => {
        const rank = index + 1;
        let rankClass = '';
        if (rank === 1) rankClass = 'top-1';
        else if (rank === 2) rankClass = 'top-2';
        else if (rank === 3) rankClass = 'top-3';
        
        return `
            <div class="affiliator-item" style="animation: fadeInUp 0.4s ease-out backwards; animation-delay: ${index * 0.05}s;">
                <div class="affiliator-rank ${rankClass}">#${rank}</div>
                <div class="affiliator-avatar">?</div>
                <div class="affiliator-info">
                    <div class="affiliator-username">${escapeHtml(affiliator.username)}</div>
                    <div class="affiliator-earnings">Commission earned</div>
                </div>
                <div class="affiliator-robux">${affiliator.robux_earned.toLocaleString()}R$</div>
            </div>
        `;
    }).join('');
}

// Switch conversion mode
converterTabs.forEach(tab => {
    tab.addEventListener('click', () => {
        converterTabs.forEach(t => t.classList.remove('active'));
        tab.classList.add('active');
        currentMode = tab.dataset.mode;
        
        if (currentMode === 'php-to-robux') {
            inputLabel.textContent = 'Enter Amount (PHP)';
            resultLabel.textContent = 'Robux Amount';
            rateDisplay.textContent = `Rates: ‚Ç±10 = 25 Robux ‚Ä¢ ‚Ç±40 = 100 Robux ‚Ä¢ ‚Ç±120 = 300 Robux`;
        } else {
            inputLabel.textContent = 'Enter Amount (Robux)';
            resultLabel.textContent = 'PHP Amount';
            rateDisplay.textContent = `Rates: 25 Robux = ‚Ç±10 ‚Ä¢ 100 Robux = ‚Ç±40 ‚Ä¢ 300 Robux = ‚Ç±120`;
        }
        
        converterInput.value = '';
        resultValue.textContent = '0';
    });
});

// Calculate conversion
converterInput.addEventListener('input', () => {
    const value = parseFloat(converterInput.value) || 0;
    let result;
    
    if (currentMode === 'php-to-robux') {
        result = 0;
        for (let pkg of PRICE_LIST) {
            if (value >= pkg.price) {
                const packages = Math.floor(value / pkg.price);
                const remainder = value % pkg.price;
                result = packages * pkg.robux;
                
                if (remainder > 0) {
                    result += Math.floor(remainder * (pkg.robux / pkg.price));
                }
            }
        }
        
        if (value > 0 && value < PRICE_LIST[0].price) {
            const rate = PRICE_LIST[0].robux / PRICE_LIST[0].price;
            result = Math.floor(value * rate);
        }
        
        resultValue.textContent = result.toLocaleString();
    } else {
        result = 0;
        for (let i = PRICE_LIST.length - 1; i >= 0; i--) {
            const pkg = PRICE_LIST[i];
            if (value >= pkg.robux) {
                const packages = Math.floor(value / pkg.robux);
                const remainder = value % pkg.robux;
                result = packages * pkg.price;
                
                if (remainder > 0) {
                    result += (remainder / pkg.robux) * pkg.price;
                }
                break;
            }
        }
        
        if (value > 0 && value < PRICE_LIST[0].robux) {
            const rate = PRICE_LIST[0].price / PRICE_LIST[0].robux;
            result = value * rate;
        }
        
        resultValue.textContent = `‚Ç±${result.toLocaleString('en-PH', { minimumFractionDigits: 2, maximumFractionDigits: 2 })}`;
    }
});

// Mobile menu functionality
const menuToggle = document.getElementById('menuToggle');
const sidebar = document.getElementById('sidebar');

function closeSidebar() {
    sidebar.classList.remove('active');
}

function openSidebar() {
    sidebar.classList.add('active');
}

menuToggle.addEventListener('click', () => {
    if (sidebar.classList.contains('active')) {
        closeSidebar();
    } else {
        openSidebar();
    }
});

document.addEventListener('click', (e) => {
    if (window.innerWidth <= 768) {
        if (!sidebar.contains(e.target) && !menuToggle.contains(e.target) && sidebar.classList.contains('active')) {
            closeSidebar();
        }
    }
});
    
// Navigation functionality
document.querySelectorAll('.nav-link').forEach(link => {
    link.addEventListener('click', (e) => {
        e.preventDefault();
        
        const targetId = link.getAttribute('data-section');
        const targetElement = document.getElementById(targetId);
        
        if (targetElement) {
            document.querySelectorAll('.nav-link').forEach(l => l.classList.remove('active'));
            link.classList.add('active');
            
            const topbarHeight = document.querySelector('.topbar').offsetHeight;
            const targetPosition = targetElement.getBoundingClientRect().top + window.pageYOffset - topbarHeight - 20;
            
            window.scrollTo({
                top: targetPosition,
                behavior: 'smooth'
            });
            
            if (window.innerWidth <= 768) {
                setTimeout(closeSidebar, 300);
            }
        }
    });
});

async function loadStatistics() {
    try {
        const response = await fetch(`${API_URL}/api/statistics`);
        
        if (!response.ok) {
            throw new Error(`HTTP error! status: ${response.status}`);
        }
        
        const contentType = response.headers.get("content-type");
        if (!contentType || !contentType.includes("application/json")) {
            throw new Error("Response is not JSON");
        }
        
        const result = await response.json();
        
        if (result.success) {
            const stats = result.data;
            const statsContainer = document.getElementById('statsContainer');
            
            statsContainer.innerHTML = `
                <div class="stat-card">
                    <div class="stat-header">
                        <span class="stat-label">Available Balance</span>
                        <div class="stat-icon">‚óÜ</div>
                    </div>
                    <div class="stat-value">${stats.current_robux.toLocaleString()}</div>
                    <div class="stat-description">Robux in stock</div>
                    <div class="stat-footer">Operating: ${stats.operating_hours_start} - ${stats.operating_hours_end}</div>
                </div>
            `;
        }
    } catch (error) {
        document.getElementById('statsContainer').innerHTML = `
            <div class="stat-card">
                <div class="stat-header">
                    <span class="stat-label">Available Balance</span>
                    <div class="stat-icon">‚óÜ</div>
                </div>
                <div class="stat-value">Loading...</div>
                <div class="stat-description">Connecting to server</div>
                <div class="stat-footer">Please check back shortly</div>
            </div>
        `;
    }
}

async function loadProducts() {
    try {
        const response = await fetch(`${API_URL}/api/products`);
        
        if (!response.ok) {
            throw new Error(`HTTP error! status: ${response.status}`);
        }
        
        const contentType = response.headers.get("content-type");
        if (!contentType || !contentType.includes("application/json")) {
            throw new Error("Response is not JSON");
        }
        
        const result = await response.json();
        
        if (result.success) {
            const products = result.data;
            const productsContainer = document.getElementById('productsContainer');
            
            productsContainer.innerHTML = products.map(product => `
                <div class="product-card ${!product.in_stock ? 'out-of-stock' : ''}">
                    <div class="product-header">
                        ${!product.in_stock 
                            ? '<div class="product-badge stock-badge">OUT OF STOCK</div>' 
                            : product.badge 
                                ? `<div class="product-badge ${getBadgeClass(product.badge)}">${product.badge}</div>`
                                : ''}
                        <div class="product-icon-wrapper">${product.icon}</div>
                        <div class="product-tier">${product.tier}</div>
                        <div class="product-name">${product.robux_amount >= 100 && product.robux_amount < 1000 ? 'Custom Package' : 'Standard Package'}</div>
                    </div>
                    <div class="product-body">
                        <div class="product-amount">
                            <div class="amount-value">${product.robux_amount >= 100 && product.robux_amount < 1000 ? product.robux_amount + '+' : product.robux_amount.toLocaleString()}</div>
                            <div class="amount-label">${product.robux_amount >= 100 && product.robux_amount < 1000 ? 'Minimum Robux' : 'Robux'}</div>
                        </div>
                        ${product.total_sales && product.total_sales > 0 ? `
                        <div class="product-stats">
                            <span class="stats-icon">‚ö°</span>
                            <span><span class="stats-number">${product.total_sales.toLocaleString()}</span> sales</span>
                        </div>
                        ` : ''}
                        <div class="product-price">
                            <div class="price-value">${product.price}</div>
                            <div class="price-label">${product.price_label}</div>
                        </div>
                    </div>
                    <div class="product-footer">
                        <button class="order-button ${!product.in_stock ? 'disabled' : ''}"
                                onclick="orderProduct(${product.robux_amount}, '${product.price}', ${!product.in_stock})"
                                ${!product.in_stock ? 'disabled' : ''}>
                            ${product.tier === 'CUSTOM' ? 'Request Quote' : (product.in_stock ? 'Order Now' : 'Out of Stock')}
                        </button>
                    </div>
                </div>
            `).join('');
        }
    } catch (error) {
        document.getElementById('productsContainer').innerHTML = `
            <div class="loading">
                <p style="margin-bottom: 1rem;">Unable to load products at this time.</p>
                <p style="font-size: 0.875rem; color: var(--text-tertiary);">Please contact us directly for available packages.</p>
            </div>
        `;
    }
}

loadStatistics();
loadProducts();

setInterval(() => {
    loadStatistics();
    loadProducts();
}, 30000);

// Comments functionality
let allComments = [];
let currentPage = 1;
const commentsPerPage = 3;

async function loadComments() {
    try {
        const response = await fetch(`${API_URL}/api/comments`);
        
        if (!response.ok) {
            throw new Error(`HTTP error! status: ${response.status}`);
        }
        
        const contentType = response.headers.get("content-type");
        if (!contentType || !contentType.includes("application/json")) {
            throw new Error("Response is not JSON");
        }
        
        const result = await response.json();
        
        if (result.success) {
            allComments = result.data || [];
            displayComments();
        } else {
            throw new Error('API returned success: false');
        }
    } catch (error) {
        allComments = [];
        displayComments();
    }
}

function displayComments() {
    const commentsList = document.getElementById('commentsList');
    const pagination = document.getElementById('commentsPagination');
    
    if (allComments.length === 0) {
        commentsList.innerHTML = '<div class="comment-empty">No comments yet. Be the first to share your experience!</div>';
        pagination.style.display = 'none';
        return;
    }
    
    const totalPages = Math.ceil(allComments.length / commentsPerPage);
    const startIndex = (currentPage - 1) * commentsPerPage;
    const endIndex = startIndex + commentsPerPage;
    const commentsToShow = allComments.slice(startIndex, endIndex);
    
    commentsList.innerHTML = commentsToShow.map((comment, index) => `
        <div class="comment-item" style="animation-delay: ${index * 0.05}s;">
            <div class="comment-avatar">?</div>
            <div class="comment-content">
                <div class="comment-author">Anonymous</div>
                <div class="comment-text">${escapeHtml(comment.comment_text)}</div>
            </div>
        </div>
    `).join('');
    
    if (totalPages > 1) {
        pagination.style.display = 'flex';
        renderPagination(totalPages);
    } else {
        pagination.style.display = 'none';
    }
}

function renderPagination(totalPages) {
    const paginationNumbers = document.getElementById('paginationNumbers');
    const prevBtn = document.getElementById('prevPage');
    const nextBtn = document.getElementById('nextPage');
    
    let numbersHTML = '';
    for (let i = 1; i <= totalPages; i++) {
        numbersHTML += `<button class="pagination-number ${i === currentPage ? 'active' : ''}" data-page="${i}">${i}</button>`;
    }
    paginationNumbers.innerHTML = numbersHTML;
    
    prevBtn.disabled = currentPage === 1;
    nextBtn.disabled = currentPage === totalPages;
    
    document.querySelectorAll('.pagination-number').forEach(btn => {
        btn.addEventListener('click', () => {
            currentPage = parseInt(btn.dataset.page);
            displayComments();
        });
    });
}

document.getElementById('prevPage').addEventListener('click', () => {
    if (currentPage > 1) {
        currentPage--;
        displayComments();
    }
});

document.getElementById('nextPage').addEventListener('click', () => {
    const totalPages = Math.ceil(allComments.length / commentsPerPage);
    if (currentPage < totalPages) {
        currentPage++;
        displayComments();
    }
});

function escapeHtml(text) {
    const div = document.createElement('div');
    div.textContent = text;
    return div.innerHTML;
}

const commentInput = document.getElementById('commentInput');
const commentCounter = document.getElementById('commentCounter');

commentInput.addEventListener('input', () => {
    const length = commentInput.value.length;
    commentCounter.textContent = `${length}/50`;
    
    if (length > 180) {
        commentCounter.style.color = 'var(--danger)';
    } else if (length > 150) {
        commentCounter.style.color = 'var(--warning)';
    } else {
        commentCounter.style.color = 'var(--text-tertiary)';
    }
});

document.getElementById('commentForm').addEventListener('submit', async (e) => {
    e.preventDefault();
    
    const input = document.getElementById('commentInput');
    const submitBtn = document.getElementById('commentSubmit');
    const errorDiv = document.getElementById('commentError');
    const commentText = input.value.trim();
    
    if (!commentText) return;
    
    errorDiv.textContent = '';
    submitBtn.disabled = true;
    submitBtn.textContent = 'Posting...';
    
    try {
        const hasCommented = localStorage.getItem('hasCommented');
        
        if (hasCommented) {
            errorDiv.textContent = 'You can only post one comment. Your previous comment is already visible.';
            submitBtn.disabled = false;
            submitBtn.textContent = 'Post Comment';
            return;
        }
        
        const response = await fetch(`${API_URL}/api/comments`, {
            method: 'POST',
            headers: {
                'Content-Type': 'application/json',
            },
            body: JSON.stringify({
                commentText: commentText
            })
        });
        
        if (!response.ok) {
            throw new Error(`HTTP error! status: ${response.status}`);
        }
        
        const contentType = response.headers.get("content-type");
        if (!contentType || !contentType.includes("application/json")) {
            throw new Error("Response is not JSON - API may not be configured");
        }
        
        const result = await response.json();
        
        if (result.success) {
            localStorage.setItem('hasCommented', 'true');
            input.value = '';
            commentCounter.textContent = '0/50';
            commentCounter.style.color = 'var(--text-tertiary)';
            currentPage = 1;
            loadComments();
            submitBtn.textContent = 'Posted!';
            setTimeout(() => {
                submitBtn.textContent = 'Post Comment';
            }, 2000);
        } else {
            errorDiv.textContent = result.error || 'Failed to post comment';
        }
    } catch (error) {
        if (error.message.includes('not JSON')) {
            errorDiv.textContent = 'Comments feature is currently unavailable. Please contact us directly.';
        } else {
            errorDiv.textContent = 'Failed to post comment. Please try again or contact us directly.';
        }
    } finally {
        submitBtn.disabled = false;
        if (submitBtn.textContent === 'Posting...') {
            submitBtn.textContent = 'Post Comment';
        }
    }
});

loadComments();
setInterval(loadComments, 15000);
</script>

</body>
</html>
